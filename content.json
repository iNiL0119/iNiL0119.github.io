{"meta":{"title":"Hexo","subtitle":null,"description":null,"author":"John Doe","url":"http://blog.inil0119.com"},"pages":[],"posts":[{"title":"第二章-优化","slug":"chapter2","date":"2018-11-06T03:34:30.000Z","updated":"2018-11-07T13:02:57.180Z","comments":true,"path":"2018/11/06/chapter2/","link":"","permalink":"http://blog.inil0119.com/2018/11/06/chapter2/","excerpt":"","text":"前言&emsp;&emsp;经过第一天的努力，博客已经可以正常运行了，但还是有很多地方需要优化。 汉化&emsp;&emsp;以导航栏为例，现在导航栏都是英文，通过全局搜索可以发现/themes/pure/languages/default.yml即为默认的语言设置文件，如图1。 图1 默认语言设置 &emsp;&emsp;例如，可以修改menu选项下的参数，比如将home修改为中文首页，如图2，刷新网页后左侧导航的Home变为中文首页。 图2 修改默认语言 增加文章目录&emsp;&emsp;当前版本Hexo可以通过在.md文章头部添加toc字段，如图3。 图3 添加文章目录 &emsp;&emsp;因为不熟悉，一开始全局找这个toc到底在哪里设置，但是找了好久都没找到，后来只能通过google来解决了。在这个过程中，来看一下涉及到的相关文件。一个文件是/themes/pure/layout/_partial/post/nav.ejs，如图4。 图4 nav.js &emsp;&emsp;这个文件对应的就是文章底部的bar-footer，而文章目录对应就是toogle-toc，如图5。 图5 bar-footer &emsp;&emsp;通过代码可以看到，文章目录显示的条件是if (!index &amp;&amp; theme.config.toc &amp;&amp; post.toc)，这里的index===false，不确定是什么意思，但是在/themes/pure/layout/post.ejs代码中有两个index=false，我推测这里的意思是只要是当前文章内容或者显示文章目录的就指定index为false，如图6；theme.config.toc可以通过主题配置文件_config.yml中的config.toc确认为true，意思是开启文章目录导航；最后post.toc是指文章是指当前文章是否开启TOC功能。用法本节开头已经介绍，这里需要注意，每篇文章开头都需要设置toc为true。 图6 post.ejs &emsp;&emsp;另外一个文件是/themes/pure/layout/_partial/sidebar-toc.ejs，代码内容如图7，条件判断和上面的一致。 图7 sidebar-toc.ejs 搜索&emsp;&emsp;在pure主题的配置文件中找到search项。1234# Searchsearch: insight: true # you need to install `hexo-generator-json-content` before using Insight Search baidu: false # you need to disable other search engines to use Baidu search &emsp;&emsp;尝试用insigth插件实现搜索功能，依据说明先安装hexo-generator-json-content。1$ npm install hexo-generator-json-content --save &emsp;&emsp;看到这里，突然想起不管是本地还是线上，系统都会报404的问题，有个文件没找到，而这个文件本地环境中是http://localhost:4000/content.json ，线上是http://blog.inil0119.com/content.json，这个文件是否和这个插件有关系呢？&emsp;&emsp;参考一下hexo pure主题推荐的博客https://blog.cofess.com/，打开控制台可以看到https://blog.cofess.com/content.json内容如图8。 图8 参考content.json &emsp;&emsp;该json文件的内容刚好对应搜索框中的内容，如图9。 图9 搜索框 &emsp;&emsp;是否如猜想一般呢，继续往下试试吧。&emsp;&emsp;安装好插件之后，刷新本地服务，但是没有任何变化，重新构建下，刷新，页面如图10。 图10 搜索弹框 &emsp;&emsp;和猜想的一样，也就是说此时content.json已经存在了，验证下，如图11。 图11 本地content.json 参考Hexo—如何设置文章目录（TOC）Hexo博客主题pure使用说明","categories":[],"tags":[]},{"title":"第一章-启程","slug":"chapter1","date":"2018-11-05T14:25:27.000Z","updated":"2018-11-07T12:19:28.932Z","comments":true,"path":"2018/11/05/chapter1/","link":"","permalink":"http://blog.inil0119.com/2018/11/05/chapter1/","excerpt":"","text":"前言&emsp;&emsp;颓废了许久，不想继续这种碌碌无为的生活，用博客写点（搬运）东西，不管是技术上还是生活中，也许这样还能找回一点点的激情和动力。长话短说，正式开始我的博客的第一章。 安装Hexo1$ npm install -g hexo-cli 后续可以通过 npm update -g hexo更新 创建项目123$ hexo init &lt;folder&gt;$ cd &lt;folder&gt;$ npm install 运行12$ hexo g # hexo generate$ hexo s # hexo server，服务地址http://localhost:4000/ &emsp;&emsp;运行如图1。 图1 landscape 更改主题&emsp;&emsp;打开系统配置文件_config.yml，定位到theme字段，默认为landsacpe，如图1。通过更改该值可以改变系统主题，但首先要找到一个合适的主题，可以在这里寻找适合自己的主题，并可以通过git clone将主题引入自己的博客。&emsp;&emsp;这里以next为例，通过github搜索next，这里需要注意hexo主题next有两个如图2，iissnan貌似已经停更，需要选择theme-next。 图2 github中next主题 &emsp;&emsp;在当前根目录下，git clone https://github.com/theme-next/hexo-theme-next themes/next 并将_config.yml中theme改为next。&emsp;&emsp;Ctrl+C停止服务，并在终端重新输入：123$ hexo clean$ hexo g$ hexo s &emsp;&emsp;刷新http://localhost:4000/，新的主题如图3。 图3 lnext默认主题Muse 修改Next配置文件&emsp;&emsp;Next有4中主题，可以修改/themes/next/_config.yml中的scheme切换主题。切换scheme可以预览各种主题的区别： Muse - 默认 Scheme，这是 NexT 最初的版本，黑白主调，大量留白Mist - Muse 的紧凑版本，整洁有序的单栏外观Pisces - 双栏 Scheme，小家碧玉似的清新Gemini - 双栏 Scheme，与 Pisces 几乎一样 &emsp;&emsp;试用Gemini主题如图4。 图4 Gemini hexo配置&emsp;&emsp;具体的配置说明可以参考官网配置，一开始只需要关注_config.yml系统配置文件、/themes主题文件夹、和/source/_posts（新创建的文章将保存在该文件夹）。 常用命令1234567$ hexo new \"postName\" #新建文章$ hexo new page \"pageName\" #新建页面$ hexo generate #生成静态页面至public目录$ hexo server #开启预览访问端口（默认端口4000，'Ctrl + C'关闭server）$ hexo deploy #将.deploy目录部署到GitHub$ hexo help # 查看帮助$ hexo version #查看Hexo的版本 github配置&emsp;&emsp;创建新项目，注意repo名称格式为用户名.github.io，例如iNiL0119.github.io，然后在浏览器中输入https://inil0119.github.io/ 测试是否创建成功。&emsp;&emsp;设置系统配置文件_config.yml，修改deploy配置项如图5。 图5 github部署设置 注意，冒号后面必须空一格 部署1$ hexo d # hexo deploy &emsp;&emsp;此时报错：ERROR Deployer not found: git&emsp;&emsp;解决办法：1$ npm install hexo-deployer-git --save &emsp;&emsp;再次运行hexo d，成功部署，此时/public代码上传到github，如图6。 图6 部署到github &emsp;&emsp;刷新https://inil0119.github.io/，显示最新Next Gemini主题。&emsp;&emsp;对比Next最终还是决定用pure主题，因为比较小清新，而且功能比较完整，系统界面如图7。 图7 pure主题 绑定域名&emsp;&emsp;解析设置如图8。 图8 域名解析 &emsp;&emsp;浏览器输入inil0119.com，网站404错误如图9，说明域名已经映射到github网站，还需要设置github网站向域名的映射。 图9 404错误 &emsp;&emsp;进入github仓库，点击Create new file，文件名为CNAME如图10，并单击下方的Commit new file按钮。 图10 创建CNAME文件 &emsp;&emsp;之后，在浏览器输入最新的域名地址，成功显示Blog内容，说明绑定成功了。 部署问题&emsp;&emsp;再重新走一遍部署流程hexo clean -&gt; g -&gt; d，此时发现网站又变成404了，github上看看发现原来的CNAME被强制push掉了，原来如此。解决方式也很简单，就是在本地项目中添加CNAME文件，注意将CNAME添加到/source目录下，部署之后就正常了。 其他Error&emsp;&emsp;1. 出现类似 FATAL can not read a block mapping entry; a multiline key may not be an implicit key at line …&emsp;&emsp;解决办法：_config.yml中配置项的冒号后面要用空格隔开&emsp;&emsp;2. 中文乱码问题&emsp;&emsp;解决办法：将内容所在文件的编码改为UTF8格式 参考Hexo官网用Hexo + github搭建自己的博客 — 再也不用羡慕别人了！Hexo搭建个人博客并部署到Github新手用hexo和github搭建属于自己的博客","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2018-11-02T10:27:08.488Z","updated":"2018-11-07T09:32:11.558Z","comments":true,"path":"2018/11/02/hello-world/","link":"","permalink":"http://blog.inil0119.com/2018/11/02/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}